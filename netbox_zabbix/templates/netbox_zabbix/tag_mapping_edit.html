{% extends 'generic/object_edit.html' %}

{% block title %}Edit Tag Mapping{% endblock %}

{% block form %}
<div class="row mb-3">
    <div class="col">
        {{ form.object_type.label_tag }}
        {{ form.object_type }}
        {{ form.object_type.errors }}
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const objectTypeSelect = document.querySelector('select[name="object_type"]');
        if (objectTypeSelect) {
            objectTypeSelect.addEventListener('change', function () {
                const url = new URL(window.location.href);
                url.searchParams.set('object_type', this.value);
                window.location.href = url.toString();
            });
        }
    });
</script>

<fieldset class="card mb-3">
    <div class="card-header"><strong>Field Selection</strong></div>
    <div class="card-body">
        {% for field in form.visible_fields %}
        {% if field.name != 'object_type' %}
        <div class="form-check mb-2">
            {{ field }} {{ field.label }}
            {{ field.errors }}
        </div>
        {% endif %}
        {% endfor %}
    </div>
</fieldset>
{% endblock %}